envi
====

A dynamic file-passing and auto navigation bash script for vifm, Vim, and a
shell. It uses tmux for servers. It is invisible in the shell; no navigation
commands are shown. It is fairly extensible through rebindings. More
modularity is coming through updates. envi exists because of the efficiency of
working with the three major abstractions of data separately; text, programs,
and directories. I didn't want ugly slow addons in Vim for navigation, or have
to close Vim to open multiple files or navigate. I often found myself opening
all three of the programs envi uses together, because vifm opens files in Vim
automatically and I often wanted to see extra information in my shell.

dependencies
====

envi needs vifm, tmux, Vim, and a terminal emulator (tested with xterm and st).
A tiling window manager is recommended.

installation
====

Simply move envi to /usr/local/bin or /usr/bin. If you don't want cd commands
generated by envi to show up in your command history, set the environment
variable HISTCONTROL to ignorespace. If you don't want to use the st terminal
emulator, place your terminal and an argument that runs commands in the
"terminal" variable in envi.

operation
====

Use h and l to navigate normally in vifm. Working directory of Vim and your
shell will be set automatically. Text files will be opened automatically in
Vim. Unknown file types are outputted to $HOME/.envi/unknown and then opened
normally in vifm so that you can modify the behaviour later. Behaviour of Vim
and vifm on initialization (rebindings, etc) can be set inside
$HOME/.envi/vifm-start and $HOME/.envi/vim-start. Quitting inside of Vim with
ZZ causes all the programs to exit. If you "lose" a server, need to reload
configs, or accidentally closed it, run envi again; servers that
were already open will reconnect, and missing servers will be created anew
The names of servers are kept in variables, so you should be able to add the
option to have more instances open if you wish. envi -o opens files. However,
the -o option replaces spaces with escaped spaces. The envi -O option is
equivalent to
```
for i in (arguments); do envi -o $i; done
```
As such, you can use globbing such as envi -O \*.c and other expressions. The
hacks used to prevent output from showing in the terminal work with both emacs
and vi keys enabled in bash. In the script, single sleep commands are sometimes
used to make sure that servers are initialized to avoid expensive loops. It is
not written for other computers, and if it behaves strangely you should
increase the length of the sleep commands or write loops that ask tmux if the
servers exist yet; this still might not work. envi will work best on a light
system.  Even though it's a personal script, feel free to submit issues if you
experience any problems.

modifying
====

When you are modifying, most extension should be done by sending keys through
the servers. The default names of the servers are V2 for Vim's tmux server, VT
for the shell's server, and VF for vifm's server. You can access these with
```
tmux send-keys -t(servername) (keys)
```
Vim's built in server capabilities are also used. A tmux server is only used
because Vim does not support reconnection. Vim's server can be accessed with
```
vim --servername VV --remote-send (keys)
```
Vim's server is called VV by default. There are several remote options for Vim.
Search Vim's manual for "remote" to find these.
```
man vim
```
The simplest way to add new functions is to modify the vifm-start and vim-start
files and bind keys to the commands. Look inside the files and study the source
of envi to see my style for this.

known issues
====

cd commands are still visible in vifm's command history. Vim sometimes renders
incorrectly, always on the first run and usually with remotely opening large
files; this can be fixed by reconnecting.
